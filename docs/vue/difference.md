### vue3 性能提升

1.  响应式系统
    - vue3 使用 Proxy 机制替代了 vue2 中基于 Object.defineProperty 实现响应式。Proxy 可以直接处理对象的属性添加和删除，性能更高
2.  编译器优化
    - 静态提升：模板中的静态节点会被提升，只会被创建一次，避免了重复创建和更新
    - 编译时优化： vue3 编译器在编译时进行优化，减少运行时开销
3.  virtual Dom 改进

    - Vue3 引入 block tree 概念，优化虚拟 DOM 的 diff 算法，减少不必要的更新。通过将动态节点和静态节点区分开来，只对动态节点进行更新

    ```
    // Vue 3 中的 Block Tree
    <div>
    <span>{{ dynamic }}</span> <!-- 只更新这个动态节点 -->
    <p>static content</p> <!-- 静态内容不更新 -->
    </div>

    ```

4.  Tree-shaking 支持

    - Vue 3 采用模块化设计，允许按需引入所需功能，未使用的部分可以被 Tree-shaking 移除，从而减小最终打包的体积。

    ```
    // 只引入所需功能
    import { createApp, ref } from 'vue';

    ```

5.  渲染优化
    编译器在编译模板时会标记静态节点和动态节点，减少运行时的开销
    - Fragment 支持：支持返回多个根节点，减少不必要的包裹元素，从而减少 DOM 层级
    - teleport：允许将组件的 DOM 结构渲染到当前组件外部的任意位置，从而减少复杂的 DOM 操作
6.  Suspense 和异步处理
7.  事件处理和批处理
    - 事件处理优化：Vue 3 优化了事件处理机制，减少了事件侦听器的开销
    - 批处理更新：Vue 3 的响应式系统默认批处理更新操作，减少了重复渲染。
